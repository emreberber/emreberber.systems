<p>Bu dönem aldığım <em>Bilgisayar Ağları Laboratuvarı</em> dersinde yaptığımız <em>Ağ Sunucuları ve Uygulaması</em> deneyinin uygulama kısmını yazıya dökmek istedim. Yazıyı fazla uzun tutmamak adına sadece DHCP Sunucuyla ilgili olan kısımdan (1 ve 2. kısım) bahsedeceğim. DNS tarafını bir başka blog yazısına saklıyorum. </p><ul><li>Deney Föyü : <a href="http://www.ktu.edu.tr/dosyalar/bilgisayar_f10a8.pdf">http://www.ktu.edu.tr/dosyalar/bilgisayar_f10a8.pdf</a></li><li>Uygulama ve İşleyiş :  <a href="http://www.ktu.edu.tr/dosyalar/bilgisayar_9a3a2.pdf">http://www.ktu.edu.tr/dosyalar/bilgisayar_9a3a2.pdf</a></li></ul><p><strong>Uygulama Adımları :</strong></p><p>[1] Yerel Ağda DHCP Konfigürasyonu<br>[2] DHCP Relay ile IP Atama</p><p></p><figure class="kg-card kg-image-card"><img src="/content/images/2019/03/9878bb86badf5bb960217f61240ef10066d20ce7_main_hero_image-3.jpg" class="kg-image"></figure><blockquote>Daha önce Cisco Packet Tracer tecrübesi olmayanlar için bu <a href="https://www.youtube.com/watch?v=Df7txER7XHE&amp;list=PLQMq5dvivt0U1u8u-_VeettjtvO-7lbvw">linkte</a> yer alan oynatma listesini önerebilirim.</blockquote><h3 id="ubuntu-18-04-cisco-packet-tracer-kurulumu"><strong>Ubuntu 18.04 Cisco Packet Tracer Kurulumu</strong></h3><ul><li>Öncelikle <a href="https://www.netacad.com/courses/packet-tracer/introduction-packet-tracer">https://www.netacad.com/courses/packet-tracer/introduction-packet-tracer</a> adresinden kayıt işlemlerini gerçekleştirmeli,</li><li>Daha sonra menüden <em>Resources -&gt; Download Packet Tracer</em> adımlarını izlemeniz gerekmekte.</li><li>Açılan sayfa indirme linki üzerinden paketi indiriyoruz. (<strong>Packet Tracer 7.2.1 for Linux 64 bit.tar.gz</strong>)</li><li><code>$ sudo tar xvzf 'Packet Tracer 7.2.1 for Linux 64 bit.tar.gz'</code></li><li><code>$ ./PacketTracer7</code></li><li><code>$ packettracer</code></li></ul><hr><h3 id="-1-yerel-agda-dhcp-konfig-rasyonu"><strong>[1] Yerel Agda</strong> <strong>DHCP Konfigürasyonu</strong></h3><p>Gerekli Malzemeler</p><ul><li>3 tane Client (PC)</li><li>1 tane Server (DHCP)</li><li>1 tane Router (PT-Router)</li><li>1 tane Switch (2950-24)	</li><li>ve alabildiğince kablo</li></ul><blockquote><strong>! </strong>(<a href="https://www.computernetworkingnotes.com/ccna-study-guide/cabling-cisco-devices-guide.html">Cabling Cisco Devices Guide</a>)<strong> </strong>Uygulama sırasında kullancağımız cihaz ve kablolar hakkında fazla detaya girmek istemiyorum. Bu yüzden kablo sekmesinde ilk başta yer alan (turuncu şimşek işaretli olan) kabloyu seçebilirsiniz. (FastEthernet0/0 ve s2/0 bağlantı arayüzlerini değiştirmeniz gerekebilir.) <br><br><strong>! </strong>Herhangi bir öge eklerken (kablo vs.) <strong>CTRL </strong>tuşuna basılı tutarak seçerseniz, aynı ögeyi tekrar seçmek zorunda kalmazsınız.</blockquote><figure class="kg-card kg-image-card"><img src="/content/images/2019/03/07.png" class="kg-image"></figure><p><strong>Konfigürasyon</strong></p><ul><li> Server0 ve Router0 olarak gözüken isimleri daha anlamlı hale getirmek için üzerlerine bir kez tıklıyoruz. Açılan pencerede <em>Config</em> başlığı altında yer alan <em>Display Name</em> kısmını Server0 yerine <strong>DHCP</strong>, Router0 yerine de <strong>R1</strong> yazıyoruz. </li></ul><p></p><ul><li>Ağda hizmet veren sunucuların IP Adreslerinin değişmesini istemeyiz. Bu yüzden DHCP Sunucusunun IP Adresini Statik olarak vermemiz gerekiyor. <em>Desktop</em> -&gt; <em>IP Configuration</em> kısmında Sunucunun IP Adresi <strong>192.168.1.2</strong> olsun istedim. (Belirttiğimiz IP Adresi C Sınıfı olduğundan dolayı Default Subnet Mask'i 255.255.255.0 olarak otomatik tamamlanır.) Son olarak <em>Default Gateway</em>'i <strong>192.168.1.1</strong> yazıyoruz. Bu adres birazdan belirleyeceğimiz Router'ın yerel ağa bağlandığı fiziksel arayüzün adresidir. </li></ul><p></p><ul><li>Sunucunun DHCP Servisini başlatmak için <em>Services </em>başlığı altında yer alan <em>DHCP</em> sekmesine erişiyoruz. İlk ağ için IP havuzu oluşturacağız. Varsayılan olarak <em>serverPool</em> isimli bir havuz bulunur. <em>Service</em> durumunu <em>On</em> olarak ayarladıktan sonra <em>Default Gateway</em> Adresini 192.168.1.1 olarak güncelliyoruz. 10'a kadar olan adresleri Statik IP için boş bırakmak istedim. <em>Save</em> butonu ile yaptığımız tüm bu işlemleri kaydedip çıkabiliriz.</li></ul><figure class="kg-card kg-image-card"><img src="/content/images/2019/03/04-2.png" class="kg-image"></figure><ul><li>Router için IP Adresi verirken <em>Config</em> -&gt; <em>Interface</em> -&gt; <em>FastEthernet0</em>/0  kısmında yapmamız gerekenler,<br>a. Port Status : On <br>b. IP Address : 192.168.1.1<br>c. Subnet Mask : 255.255.255.0</li></ul><p></p><ul><li>Bu işlemlerin ardından artık istemciler DHCP Sunucusundan IP Adresi alabilecekler. İstemcilerin <em>IP Configuration</em> alanlarına gelerek, <em>DHCP</em> seçeneğini işaretliyoruz. İstemci, DHCP Sunucusundan IP, Subnet Mask ve Default Gateway Adreslerini alacaktır. DNS Sunucusu bilgisi girmediğimizden dolayı bu alan boş kalacaktır.</li><li><a href="https://www.quora.com/What-information-does-a-DHCP-server-sends-to-its-client">What information does a DHCP server sends to its client?</a></li></ul><p><strong>Notlarımızı alalım:</strong></p><p>	a. 192.168.1.1 <strong>R1</strong>  (Gateway)<br>	b. 192.168.1.2 <strong>DHCP</strong> </p><p><strong>Test 101:</strong></p><ul><li>Bu zamana kadar yaptığımız tüm işlemlerden sonra kırmızı renkte kablo görmememiz gerekir.</li><li>Sunucu ve istemciler kendi aralarında pingleşebilmelidir.</li><li><code>ping 192.168.1.1</code></li></ul><hr><h3 id="-2-dhcp-relay-ile-ip-atama"><strong>[2] DHCP Relay ile IP Atama</strong></h3><p>Bu kısımda ikinci ağın temellerini atacağız. Oluşturacağımız bu ağdaki gerekli malzemeler listesi ise,</p><ul><li>1 tane Client (PC)</li><li>1 tane Switch (2950-24)</li><li>1 tane Router (PT-Router)</li><li>Kablo</li></ul><p>Routerlar seri haberleşme ara yüzü ile bağlanacak olup daha sonra bu arayüzler için de IP ataması gerçekleştireceğiz.</p><figure class="kg-card kg-image-card"><img src="/content/images/2019/03/09.png" class="kg-image"></figure><p>İki Router'ı birbirine bağlamak için serial DTE adlı kablo kullanılır. Programda bu kablo için belirlenmiş olan renk kırmızıdır. Herhangi bir sorun yok yani :)<br>İkinci Router'a da R2 ismini verdikten sonra IP Adresini 192.168.2.1 olarak belirliyoruz (Port Status : On , yapmayı unutmuyoruz.). Bu işlemin ardından R2 ile Switch1 arası yeşil renkte olacaktır. </p><ul><li>Router'ların birbirleri ile seri haberleşmesi için <em>Config</em> -&gt; <em>Interface</em> -&gt; <em>Serial2/0 </em>(veya <em>Serial3/0</em>) kısmında gelerek R1 için <strong>10.0.0.1 </strong>ve R2 için <strong>20.0.0.1</strong> adresleri verelim.</li><li>Ardından Router'lar için Statik Yönlendirme işlemini gerçekleştirelim. Bunun için her iki Router'ın komut satırı arayüzüne (CLI)  geçerek,<br><code>Router&gt; en</code><br><code>Router# conf t</code><br><code>Router(config)# ip route 0.0.0.0 0.0.0.0 s2/0 </code><br>komutunu giriyoruz. Burada birinci 0.0.0.0 IP Adresini, ikinci 0.0.0.0 ise Subnet Mask'i belirtir. s2/0 ise Serial2/0 'ın kısaltmasıdır. Yani kendisine gelen tüm IP Adreslerini direkt Serial2/0 arayüzüne yönlendirecektir.</li><li>R2'nin CLI sekmesinde yardımcı IP Adresi belirlemek için,<br><code>Router(config)# int fa 0/0</code><br><code>Router(config-if)# ip helper-address 192.168.1.2</code><br>Burada 192.168.1.2'nin DHCP Sunucusunun IP Adresi olduğunu hatırlatalım. </li><li>İlk ağda bulunan DHCP Sunucusunun yeni oluşturduğumuz ağdaki istemciye IP ataması için yeni bir IP havuzu ekleyelim:<br>a. Pool Name : Pool2<br>b. Default Gateway : 192.168.2.1<br>c. Start IP Address : 192.168.2.10<br>d. Add &amp; Save</li><li>An itibariyle yeni oluşturduğumuz ağdaki istemci DHCP Sunucusundan IP Adresi alabilmelidir.</li></ul><figure class="kg-card kg-image-card"><img src="/content/images/2019/03/10.png" class="kg-image"></figure><p>Uygulamamızın son hali resimdeki gibi olacaktır. Sağ alt tarafta yer alan <strong>Simulation </strong>Modunu başlattıktan sonra IP talebinde bulunursanız DHCP Sunucusunun çalışma mantığını daha net bir şekilde anlayabilirsiniz.</p><figure class="kg-card kg-image-card"><img src="/content/images/2019/03/11.png" class="kg-image"></figure><p>Başka bir blog yazısında görüşmek üzere.</p><hr><p>[1] <a href="https://en.wikipedia.org/wiki/Subnetwork">Subnetwork</a><br>[2] <a href="https://tools.ietf.org/html/rfc2131">RFC 2131 - Dynamic Host Configuration Protocol</a><br>[3] <a href="https://medium.com/@gokhansengun/dhcp-nedir-ve-nas%C4%B1l-%C3%A7al%C4%B1%C5%9F%C4%B1r-ad7bed1ef468">DHCP nedir ve nasıl çalışır?</a><br>[4] <a href="https://www.computerhope.com/jargon/i/ip.htm">IP</a><br>[5] <a href="https://www.minigranth.com/computer-networks-tutorial/networking-devices/">Networking Devices : Introduction</a></p>